---
version: 1
kind: component
meta:
  name: wowza
  brief: Wowza Streaming Engine
  source:
    dir: ../../components/wowza

requires:
  - kubernetes

provides:
  - wowza

parameters:
  - name: component.ingress.ssoUrlPrefix
  - name: component.ingress.urlPrefix
  - name: dns.domain
    brief: DNS domain
    kind: tech
    env: DOMAIN_NAME
  - name: component.wowza
    parameters:
    - name:    name
      default: wowza
      env:     COMPONENT_NAME
    - name:    namespace
      brief:   Kubernetes namespace to install into
      default: wowza
      env:     NAMESPACE
    - name:    ingress.urlPrefix
      default:  streaming
    - name:    license
      default: ET1E4-jQYfa-DRDEy-KExpf-C9TdU-ADKE8-9wWWdNmWCxEQ

templates:
  files:
    - "*.template"

outputs:
  - name: component.wowza.url
    brief: Wowza URL
    value: http://wowza.${component.wowza.ingress.urlPrefix}.${component.ingress.urlPrefix}.${dns.domain}/enginemanager
  - name: component.wowza.name
    value: ${component.wowza.name}
  - name: component.wowza.namespace
    value: ${component.wowza.namespace}

---
version: 1
kind: component
meta:
  name: kubernetes-dashboard
  brief: Kubernetes Dashboard
  source:
    dir: ../../components/kube-dashboard

requires:
  - kubernetes

provides:
  - kubernetes-dashboard

parameters:
  - name: component.ingress.protocol
  - name: component.ingress.ssoFqdn
  - name: component.ingress.kubernetes.ingressClass
    value: traefik
  - name: dns.domain
    env: DOMAIN_NAME
  - name: component.kubernetes-dashboard
    parameters:
    - name:  name
      value: kubernetes-dashboard
      env:   COMPONENT_NAME
    - name:  namespace
      brief: Kubernetes namespace to install into
      value: kube-system
      env:   NAMESPACE
    - name:  version
      brief: Kubernetes Dashboard version
      value: v1.10.1
    - name:  ingress.urlPrefix
      value: kubernetes
    - name:  ingress.path
      value: /
    - name:  rbac.kind
      value: admin
      env:   RBAC_KIND

templates:
  files:
    - "*.template"

outputs:
  - name: component.kubernetes-dashboard.url
    brief: Kubernetes Dashboard
    value: ${component.ingress.protocol}://${component.kubernetes-dashboard.ingress.urlPrefix}.${component.ingress.ssoFqdn}

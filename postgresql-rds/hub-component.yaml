---
version: 1
kind: component
meta:
  name: postgresql-rds
  brief: Creates RDS instance with terraform
  source:
    dir: ../postgresql-rds

parameters:
- name: cloud.vpc.id
  env:  TF_VAR_vpc_id
- name: component.postgresql
  parameters:
  - name:    name
    brief:   Database instance name
    default: postgresql
    env: TF_VAR_name
  - name: service
    default: postgresql
    env: COMPONENT_NAME
  - name:    database
    env: TF_VAR_database_name
  - name:    username
    default: postgres
    env: TF_VAR_database_username
  - name:    password
    env: TF_VAR_database_password
outputs:
- name: component.postgresql.host
  fromTfVar: endpoint
- name: component.postgresql.url
  fromTfVar: hostname
- name: component.postgresql.port
  fromTfVar: port
- name: component.postgresql.user
  fromTfVar: username

templates:
  files: ["*.template"]

---
version: 1
kind: component
meta:
  name: etcd-operator
  brief: etcd Operator
  source:
      dir: ../../components/etcd-operator

requires:
  - kubernetes
provides:
  - etcd-operator

parameters:
  - name: dns.domain
    brief: DNS domain
    kind: tech
    env: DOMAIN_NAME
  - name: component.etcd.operator
    parameters:
    - name:    name
      default: etcd-operator
      env:     COMPONENT_NAME
    - name:    version
      brief:   etcd-operator version
      default: v0.4.2
    - name:    namespace
      brief: Kubernetes namespace to install into
      default: etcd-operator
      env:     NAMESPACE
    - name: cluster.enabled
      brief: Start etcd cluster
      default: false
      env:     CLUSTER_ENABLED
    - name: cluster.size
      default: 3
    - name:    cluster.version
      brief:   etcd version
      default: v3.1.8
    - name:    backup.enabled
      brief:   Enable backups
      default: false
      env:     BACKUP_ENABLED
    - name:    cluster.s3bucket
      brief: Name of the S3 backup backet
      default: terraform.agilestacks.com
    - name:    cluster.awssecret
      default: awsetcd
    - name:    cluster.backupInterval
      default: 3600
    - name:    cluster.maxBackups
      default: 5

templates:
  files:
    - "*.template"

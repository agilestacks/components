---
version: 1
kind: component
meta:
  name: dns-subzone
  brief: Creates the zone that was delegated to a customer cluster by SuperHub
  source:
    dir: ../../components/dns-subzone

lifecycle:
  readyConditions:
    - dns: ${dns.name}

parameters:
  - name: cloud.kind
    value: metal
  - name: cloud.region
    env: AWS_DEFAULT_REGION
  - name: dns.domain
    env: DOMAIN_NAME
  - name: component.ingress.staticHost
    env: INGRESS_STATIC_HOST
  - name: kubernetes.api.endpoint
    env: API_ENDPOINT
  - name: terraform.bucket.name
    env: STATE_BUCKET
  - name: terraform.bucket.region
    env: STATE_REGION

outputs:
  - name: dns.domain
  - name: dns.name
    fromTfVar: dns_name
  - name: dns.baseDomain
    fromTfVar: dns_base_domain
